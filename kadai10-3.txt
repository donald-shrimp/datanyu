Script started on Wed Jun 19 17:22:42 2019
u306024@imac-510[31]: cat kadai10-3.c
#include <stdio.h>
#include <stdlib.h>

#define MAX 2000
#define FMAX 20

void swap(int *x, int *y);
void quick(int a[],int left, int right);
int bin_search(int x[], int n, int key);
int lin_search(int x[], int n, int key);

int main(void)
{
  int 	i;
  int	seisu[MAX];
  int	kosu,ky,idx0,idx1;
  char 	fname[FMAX];
  FILE 	*fp;
  
  kosu=MAX;			/* ãƒ‡ãƒ¼ã‚¿å€‹æ•°ã‚’kosuã«ä»£å…¥ã€€*/
  printf("Input file name:");
  scanf("%s",fname);		/* ãƒ•ã‚¡ã‚¤ãƒ«åã®èª­ã¿è¾¼ã¿ã€€*/
  
  fp=fopen(fname,"r");		/* ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³ã€€*/
  
  if (fp==NULL)	{		/* ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³æ™‚ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†ã€€*/
    printf("No file found !");
    exit(1);
  }	
  
  //ï¼ˆï¼‘ï¼‰	ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’kosuå€‹èª­ã¿è¾¼ã¿é…åˆ—seisuã«å…¥ã‚Œã‚‹ã€‚
  for (i=0;i<kosu ; i++) {
    fscanf(fp,"%d",&seisu[i]);
  }
  printf("Number to search:");
  scanf("%d",&ky);			/* ã‚­ãƒ¼ã‚’å¤‰æ•°kyã«å…¥åŠ›ã™ã‚‹ã€€*/
  //ï¼ˆï¼’ï¼‰ç·šå½¢æ¢ç´¢ã‚’è¡Œã„çµæœã‚’å¤‰æ•°idx0ã«å‡ºåŠ›ã™ã‚‹ã€‚
  idx0=lin_search(seisu,kosu,ky);
  //ï¼ˆï¼“ï¼‰ã‚¯ã‚¤ãƒƒã‚¯ã‚½ãƒ¼ãƒˆåŠã³äºŒåˆ†æ¢ç´¢ã‚’è¡Œã„çµæœã‚’å¤‰æ•°idx1ã«å‡ºåŠ›ã™ã‚‹ã€‚
    quick(seisu,0,kosu);
    idx1=bin_search(seisu,kosu,ky);
  //ï¼ˆï¼”ï¼‰(ï¼’)ã®ç·šå½¢æ¢ç´¢ã€(ï¼“)ã®äºŒåˆ†æ¢ç´¢ã«ã‹ã‹ã£ãŸè¨ˆç®—å›æ•°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚
  printf("<è¨ˆç®—å›æ•°>\nç·šå½¢æ¢ç´¢ï¼š%d\näºŒåˆ†æ¢ç´¢ï¼š%d\n",idx0+1,idx1);
  fclose(fp);			/* ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºã€€*/
  return(0);
}

void swap(int *x, int *y)
{
  int tmp = *x;
  *x = *y;
  *y = tmp;
}

void quick(int a[],int left, int right)
{
  int pl=left;// left:ã€€å·¦ç«¯ã®æ·»ãˆå­—
    int pr=right;// right:ã€€å³ç«¯ã®æ·»ãˆå­—
    int pivot;// pivot:ã€€pivotã®å€¤
    pivot = a[(pl+pr)/2];// ãƒ”ãƒœãƒƒãƒˆã¯é…åˆ—ã®ä¸­å¤®ã«æ ¼ç´ã•ã‚ŒãŸå€¤
    while(1){
      while( a[pl] < pivot ){
	pl++;
      }
      while( a[pr] > pivot ){
	pr--;
      }
      if( pr < pl )
	break;
        
      swap( &a[pl], &a[pr] );
      pl++;
      pr--;
    }
    if( left < pr ){
      quick( a, left, pr );
    }
    if( pl < right ){
        quick( a, pl, right );
    }
}

int bin_search(int x[], int num, int key){
  int pl=0,pr=num-1,pc,times=0;
  while (1){
    pc=(pl+pr)/2;
      times++;
    if (pl>pr){
      return -1;
    }else if (x[pc]==key){
      return times;
    }else if (x[pc]<key){
      pl=pc+1;
    }else if (x[pc]>key){
      pr=pc-1;
    }		
  }
  return 0;
}

int lin_search(int a[], int n, int key)
{
  int	i=0;
  
  while(1) {
    if (i==n)
      return (-1);
    if (a[i]==key)
      return (i);
    i++;
  }
}	
u306024@imac-510[32]: gcc -lm kadai100[K-3.c
u306024@imac-510[33]: a.out
Input file name:test1.txt
Number to search:500
<è¨ˆç®—å›æ•°>
ç·šå½¢æ¢ç´¢ï¼š400
äºŒåˆ†æ¢ç´¢ï¼š11
u306024@imac-510[34]: a.out
Input file name:test2.txt
Number to search:500
<è¨ˆç®—å›æ•°>
ç·šå½¢æ¢ç´¢ï¼š800
äºŒåˆ†æ¢ç´¢ï¼š11
u306024@imac-510[35]: a.out
Input file name:ta est3.txt
Number to search:500
<è¨ˆç®—å›æ•°>
ç·šå½¢æ¢ç´¢ï¼š1200
äºŒåˆ†æ¢ç´¢ï¼š10
u306024@imac-510[36]: a.out
Input file name:test4.txt
Number to search:500
<è¨ˆç®—å›æ•°>
ç·šå½¢æ¢ç´¢ï¼š1600
äºŒåˆ†æ¢ç´¢ï¼š11
u306024@imac-510[37]: exit
exit

Script done on Wed Jun 19 17:24:35 2019
